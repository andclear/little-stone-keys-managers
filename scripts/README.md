# 数据清理脚本

本目录包含用于清理系统数据的脚本文件。

## 清理点赞数据和粉丝牌发放数据

### 方法一：使用 npm 脚本（推荐）

```bash
npm run clear-likes
```

### 方法二：直接运行 JavaScript 脚本

```bash
node scripts/clear-likes-data.js
```

### 方法三：手动执行 SQL 脚本

1. 打开 Supabase 控制台的 SQL 编辑器
2. 复制 `clear-likes-data.sql` 文件中的内容
3. 粘贴并执行

## 脚本功能说明

### `clear-likes-data.js`
- 清除所有用户的点赞记录
- 清除所有粉丝牌发放数据
- 重置所有贡献者的点赞数为 0
- 提供执行前后的统计信息
- 包含错误处理和验证机制

### `clear-likes-data.sql`
- 纯 SQL 版本的清理脚本
- 适合在 Supabase 控制台中直接执行
- 包含事务处理确保数据一致性

## 执行效果

执行清理脚本后：
- 所有点赞记录将被删除
- 所有粉丝牌数据将被清除
- 贡献者的点赞数重置为 0
- 下次用户点赞时，粉丝牌编号将重新从 001 开始

## 注意事项

⚠️ **重要提醒**：
- 此操作不可逆，请在执行前确认是否真的需要清理数据
- 建议在测试环境中先验证脚本的正确性
- 执行前可以先备份相关数据表
- 确保 `.env.local` 文件中配置了正确的 Supabase 连接信息

## 环境要求

- Node.js 环境
- 正确配置的 `.env.local` 文件
- Supabase 服务角色密钥（用于数据库操作权限）